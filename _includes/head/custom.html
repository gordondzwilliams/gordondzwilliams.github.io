{% include base_path %}

<!-- start custom head snippets -->

<!-- Support for Academicons -->
<link rel="stylesheet" href="{{ base_path }}/assets/css/academicons.css"/>

<!-- favicon from https://commons.wikimedia.org/wiki/File:OOjs_UI_icon_academic-progressive.svg -->
<link rel="apple-touch-icon" sizes="180x180" href="{{ base_path }}/images/apple-touch-icon-180x180.png"/>
<link rel="icon" type="image/svg+xml" href="{{ base_path }}/images/favicon.svg"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-32x32.png" sizes="32x32"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-192x192.png" sizes="192x192"/>
<link rel="manifest" href="{{ base_path }}/images/manifest.json"/>
<link rel="icon" href="/images/favicon.ico"/>
<meta name="theme-color" content="#ffffff"/>

<!-- end custom head snippets -->

<!-- Force CV (and any PDF in the nav) to open in a new tab -->
<script>
(function() {
  function retargetPdfLinks() {
    // Grab common nav containers used by AcademicPages/Minimal Mistakes
    var links = document.querySelectorAll('nav a, .site-nav a, .masthead a, .greedy-nav a, .visible-links a');
    links.forEach(function(a) {
      if (!a || !a.href) return;

      // Normalize for robust matching
      var href = a.href;                    // absolute URL
      var pathname = a.pathname || "";      // path part if available

      // Match your specific CV path OR any .pdf link in the nav
      var isCV = href.indexOf('/files/Williams_Gordon_CV.pdf') !== -1 ||
                 pathname.indexOf('/files/Williams_Gordon_CV.pdf') !== -1;
      var isPDF = /\.pdf(\?|$)/i.test(href) || /\.pdf(\?|$)/i.test(pathname);

      if (isCV || isPDF) {
        a.setAttribute('target', '_blank');
        a.setAttribute('rel', 'noopener');
      }
    });
  }

  // Run after everything is laid out (some themes build nav dynamically)
  window.addEventListener('load', retargetPdfLinks);

  // Also observe nav changes (e.g., greedy-nav collapsing/expanding)
  var observer = new MutationObserver(retargetPdfLinks);
  observer.observe(document.documentElement, { subtree: true, childList: true });
})();
</script>
